<!DOCTYPE html>
<html lang="en-US">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>URL scheme (draft) - Trojan-Go Docs</title>
<meta name="description" content="An unidentifiable mechanism that helps you bypass GFW.">
<meta name="generator" content="Hugo 0.108.0">
<link href="https://azadzadeh.github.io/trojan-goindex.xml" rel="alternate" type="application/rss+xml">
<link rel="canonical" href="https://azadzadeh.github.io/trojan-go/en/developer/url/">
<link rel="stylesheet" href="https://azadzadeh.github.io/trojan-go/css/theme.min.css">
<script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
<link rel="stylesheet" href="https://azadzadeh.github.io/trojan-go/css/chroma.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js"></script>
<script src="https://azadzadeh.github.io/trojan-go/js/bundle.js"></script><style>
:root {}
</style>
<meta property="og:title" content="URL scheme (draft)" />
<meta property="og:description" content="Changelog encryption format to ss;method:password Overview Thanks to @DuckSoft @StudentMain @phlinhng for discussing and contributing to the Trojan-Go URL scheme. The URL scheme is currently a draft and needs more practice and discussion.
Trojan-Go client can accept URLs to locate server resources. The principles are as follows:
Comply with URL format specifications
Ensure human readability and machine friendliness
The purpose of URLs is to locate Trojan-Go node resources and facilitate resource sharing" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://azadzadeh.github.io/trojan-go/en/developer/url/" /><meta property="og:image" content="https://azadzadeh.github.io/trojan-go/images/og-image.png"/><meta property="article:section" content="developer" />

<meta property="og:site_name" content="Trojan-Go Docs" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://azadzadeh.github.io/trojan-go/images/og-image.png"/>

<meta name="twitter:title" content="URL scheme (draft)"/>
<meta name="twitter:description" content="Changelog encryption format to ss;method:password Overview Thanks to @DuckSoft @StudentMain @phlinhng for discussing and contributing to the Trojan-Go URL scheme. The URL scheme is currently a draft and needs more practice and discussion.
Trojan-Go client can accept URLs to locate server resources. The principles are as follows:
Comply with URL format specifications
Ensure human readability and machine friendliness
The purpose of URLs is to locate Trojan-Go node resources and facilitate resource sharing"/>
<meta itemprop="name" content="URL scheme (draft)">
<meta itemprop="description" content="Changelog encryption format to ss;method:password Overview Thanks to @DuckSoft @StudentMain @phlinhng for discussing and contributing to the Trojan-Go URL scheme. The URL scheme is currently a draft and needs more practice and discussion.
Trojan-Go client can accept URLs to locate server resources. The principles are as follows:
Comply with URL format specifications
Ensure human readability and machine friendliness
The purpose of URLs is to locate Trojan-Go node resources and facilitate resource sharing">

<meta itemprop="wordCount" content="757"><meta itemprop="image" content="https://azadzadeh.github.io/trojan-go/images/og-image.png"/>
<meta itemprop="keywords" content="" /></head>
<body><div class="container"><header>
<h1>Trojan-Go Docs</h1>
<a href="https://github.com/p4gefau1t/trojan-go" class="github"><i class="fab fa-github"></i></a>
<p class="description">An unidentifiable mechanism that helps you bypass GFW.</p>

</header>
<div class="global-menu">
<nav>
<ul>
<li><a href="/trojan-go/en/">English (DeepL)</a></li>
<li><a href="/trojan-go/zh/">Chinese (original)</a></li>
<li><a href="https://github.com/p4gefau1t">GitHub</a></li></ul>
</nav>
</div>
<div class="content-container">
<main><h1>URL scheme (draft)</h1>
<h2 id="changelog">Changelog</h2>
<ul>
<li>encryption format to ss;method:password</li>
</ul>
<h2 id="overview">Overview</h2>
<p>Thanks to @DuckSoft @StudentMain @phlinhng for discussing and contributing to the Trojan-Go URL scheme. <strong>The URL scheme is currently a draft and needs more practice and discussion.</strong></p>
<p>Trojan-Go <strong>client</strong> can accept URLs to locate server resources. The principles are as follows:</p>
<ul>
<li>
<p>Comply with URL format specifications</p>
</li>
<li>
<p>Ensure human readability and machine friendliness</p>
</li>
<li>
<p>The purpose of URLs is to locate Trojan-Go node resources and facilitate resource sharing</p>
</li>
</ul>
<p>Note that embedding encoded data such as base64 in URLs is prohibited for human readability reasons. First, base64 encoding does not guarantee secure transmission, but is meant to transmit non-ASCII data over ASCII channels. Second, if you need to secure transmission when sharing URLs, encrypt the plaintext URLs instead of modifying the URL format.</p>
<h2 id="format">Format</h2>
<p>The basic format is as follows, <code>$()</code> means that <code>encodeURIComponent</code> is required here.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>trojan-go://
</span></span><span style="display:flex;"><span>    $(trojan-password)
</span></span><span style="display:flex;"><span>    @
</span></span><span style="display:flex;"><span>    trojan-host
</span></span><span style="display:flex;"><span>    :
</span></span><span style="display:flex;"><span>    port
</span></span><span style="display:flex;"><span>/?
</span></span><span style="display:flex;"><span>    sni=$(tls-sni.com)&amp;
</span></span><span style="display:flex;"><span>    type=$(original|ws|h2|h2+ws)&amp;
</span></span><span style="display:flex;"><span>        host=$(websocket-host.com)&amp;
</span></span><span style="display:flex;"><span>        path=$(/websocket/path)&amp;
</span></span><span style="display:flex;"><span>    encryption=$(ss;aes-256-gcm;ss-password)&amp;
</span></span><span style="display:flex;"><span>    plugin=$(...)
</span></span><span style="display:flex;"><span>#$(descriptive-text)
</span></span></code></pre></div><p>For example</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>trojan-go://password1234@google.com/?sni=microsoft.com&amp;type=ws&amp;host=youtube.com&amp;path=%2Fgo&amp;encryption=ss%3Baes-256-gcm%3Afuckgfw
</span></span></code></pre></div><p>Since Trojan-Go is compatible with Trojan, the URL scheme for Trojan</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>trojan://password@remote_host:remote_port
</span></span></code></pre></div><p>is compatible and acceptable. It is equivalent to</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>trojan-go://password@remote_host:remote_port
</span></span></code></pre></div><p>Note that once a server uses a non-Trojan compatible feature, you must use <code>trojan-go://</code> to locate the server. This is designed so that Trojan-Go URLs are not incorrectly accepted by Trojan, and to avoid contaminating Trojan users with URL sharing. At the same time, Trojan-Go ensures compatibility with accepting Trojan&rsquo;s URLs.</p>
<h2 id="details">Details</h2>
<p>Note: All parameter names and constant strings are case-sensitive.</p>
<h3 id="trojan-password"><code>trojan-password</code></h3>
<p>Trojan&rsquo;s password.
Cannot be omitted, cannot be an empty string, and is not recommended to contain non-ASCII printable characters.
Must be encoded with <code>encodeURIComponent</code>.</p>
<h3 id="trojan-host"><code>trojan-host</code></h3>
<p>Node IP / domain name.
Cannot be omitted and cannot be an empty string.
IPv6 address must be enclosed in square brackets.
IDN domain name (e.g. &ldquo;Baidu.cn&rdquo;) must be in <code>xn--xxxxxx</code> format.</p>
<h3 id="port"><code>port</code></h3>
<p>Node port.
Default is <code>443</code> when omitted.
Must be an integer in <code>[1,65535]</code>.</p>
<h3 id="tls-or-allowinsecure"><code>tls</code> or <code>allowInsecure</code></h3>
<p>does not have this field.
TLS is always enabled by default, unless a transport plugin disables it.
TLS authentication must be enabled. Nodes that cannot use root CA to verify the identity of the server are not suitable for sharing.</p>
<h3 id="sni"><code>sni</code></h3>
<p>SNI for custom TLS.
Defaults to the same value as <code>trojan-host</code> when omitted. Must not be an empty string.</p>
<p>Must be encoded with <code>encodeURIComponent</code>.</p>
<h3 id="type"><code>type</code></h3>
<p>The type of the transfer.
Defaults to <code>original</code> when omitted, but may not be an empty string.
Currently the only available values are <code>original</code> and <code>ws</code>, in the future there may be <code>h2</code>, <code>h2+ws</code>, etc.</p>
<p>When the value is <code>original</code>, the original Trojan transfer method is used and cannot be easily passed through CDN.
When the value is <code>ws</code>, Websocket over TLS is used.</p>
<h3 id="host"><code>host</code></h3>
<p>Custom HTTP <code>Host</code> header.
Can be omitted, when omitted the value is the same as <code>trojan-host</code>.
Can be an empty string, but may introduce unintended situations.</p>
<p>Warning: If your port is not a standard port (not 80 / 443), the RFC standard states that <code>Host</code> should be followed by the port number, e.g. <code>example.com:44333</code>. Please use your own discretion as to whether to comply.</p>
<p>The <code>encodeURIComponent</code> encoding must be used.</p>
<h3 id="path"><code>path</code></h3>
<p>Valid when transfer type <code>type</code> takes <code>ws</code>, <code>h2</code>, <code>h2+ws</code>.
It may not be omitted and may not be empty.
Must start with <code>/</code>.
You can use <code>&amp;</code>, <code>#</code>, <code>? </code> etc., but it must be a legal URL path.</p>
<p>Must be encoded with <code>encodeURIComponent</code>.</p>
<h3 id="mux"><code>mux</code></h3>
<p>does not have this field.
The current server always supports <code>mux</code> by default.
There are advantages and disadvantages to enabling <code>mux</code> or not, and it is up to the client to decide whether to enable it or not; the purpose of the URL is to locate server resources, not to specify user preferences.</p>
<h3 id="encryption"><code>encryption</code></h3>
<p>Encryption layer for securing Trojan traffic cryptographically.
Can be omitted, defaults to <code>none</code>, i.e. no encryption is used.
Cannot be an empty string.</p>
<p>Must use encodeURIComponent encoding.</p>
<p>When using the Shadowsocks algorithm for traffic encryption, the format is</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>ss;method:password
</span></span></code></pre></div><p>where ss is the fixed content and method is the encryption method, which must be one of the following.</p>
<ul>
<li><code>aes-128-gcm</code></li>
<li><code>aes-256-gcm</code></li>
<li><code>chacha20-ietf-poly1305</code></li>
</ul>
<p>where <code>password</code> is the Shadowsocks password and must not be an empty string.
<code>password</code> does not need to be escaped if it contains a semicolon.
<code>password</code> should be an English printable ASCII character.</p>
<p>Other encryption schemes to be determined.</p>
<h3 id="plugin"><code>plugin</code></h3>
<p>Additional plugin options. This field is reserved.
May be omitted, but may not be an empty string.</p>
<h3 id="url-fragment--followed-by-content">URL Fragment (# followed by content)</h3>
<p>Node description.
Not recommended to be omitted, not recommended to be an empty string.</p>
<p>Must be encoded with <code>encodeURIComponent</code>.</p>
<div class="edit-meta">

<br><a href="https://github.com/p4gefau1t/trojan-go/docs/edit/master/content/developer/url.md" class="edit-page"><i class="fas fa-pen-square"></i> Edit on GitHub</a></div><nav class="pagination"><a class="nav nav-prev" href="https://azadzadeh.github.io/trojan-go/en/developer/plugin/" title="Pluggable transport layer plug-in development"><i class="fas fa-arrow-left" aria-hidden="true"></i> Prev - Pluggable transport layer plug-in development</a>
<a class="nav nav-next" href="https://azadzadeh.github.io/trojan-go/en/developer/overview/" title="Basic introduction">Next - Basic introduction <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav><footer><p class="powered">Powered by <a href="https://gohugo.io">Hugo</a>. Theme by <a href="https://themes.gohugo.io/hugo-theme-techdoc/">TechDoc</a>. Designed by <a href="https://github.com/thingsym/hugo-theme-techdoc">Thingsym</a>.</p>
</footer>
</main><div class="sidebar">

<nav class="open-menu">
<ul>
<li class=""><a href="https://azadzadeh.github.io/trojan-go">Home</a></li>

<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/basic/">Basic Configuration</a>
  
<ul class="sub-menu">
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/basic/trojan/">Trojan fundamentals</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/basic/config/">Configuring Trojan-Go correctly</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/basic/full-config/">Full configuration file</a></li>
</ul>
  
</li>

<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/advance/">Advanced Configuration</a>
  
<ul class="sub-menu">
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/advance/mux/">Enabling multiplexing to improve network concurrency performance</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/advance/websocket/">CDN forwarding and resisting man-in-the-middle attacks using Websocket</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/advance/router/">Domestic direct connection and ad blocking</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/advance/forward/">Tunnels and reverse proxies</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/advance/nginx-relay/">A multi-path split relaying scheme based on SNI proxy</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/advance/plugin/">Using Shadowsocks Plugin/Pluggable Transport Layer</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/advance/customize-protocol-stack/">Custom Protocol Stack</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/advance/aead/">Secondary encryption with Shadowsocks AEAD</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/advance/api/">Managing users dynamically using the API</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/advance/nat/">Transparent Proxy</a></li>
</ul>
  
</li>

<li class="parent"><a href="https://azadzadeh.github.io/trojan-go/en/developer/">Implementation details and development guidelines</a>
  
<ul class="sub-menu">
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/developer/overview/">Basic introduction</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/developer/build/">Compiling and customizing Trojan-Go</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/developer/trojan/">Trojan Protocol</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/developer/mux/">Multiplexing</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/developer/websocket/">Websocket</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/developer/simplesocks/">SimpleSocks Protocol</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/developer/api/">API Development</a></li>
<li class=""><a href="https://azadzadeh.github.io/trojan-go/en/developer/plugin/">Pluggable transport layer plug-in development</a></li>
<li class="active"><a href="https://azadzadeh.github.io/trojan-go/en/developer/url/">URL scheme (draft)</a></li>
</ul>
  
</li>
</ul>
</nav>



<div class="sidebar-footer"></div>
</div>
</div><a href="#" id="backtothetop-fixed" class="backtothetop"
 data-backtothetop-duration="600"
 data-backtothetop-easing="easeOutQuart"
 data-backtothetop-fixed-fadeIn="1000"
 data-backtothetop-fixed-fadeOut="1000"
 data-backtothetop-fixed-bottom="10"
 data-backtothetop-fixed-right="20">
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i>
</span></a>
</div>
</body>
</html>
